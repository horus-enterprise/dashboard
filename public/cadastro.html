<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="icon shortcut" href="./img/logo.svg">
    <title>Dashboard</title>
</head>

<body class="formularios">
    <div class="card">
        <div class="container">
            <h2>Cadastrar Supervisor</h2>
            <form style="display: flex; flex-direction: row;" method="POST" id="formCadastroSupervisor">
                <div style="margin-right: 24px; flex: 5;">
                    <label for="txtNomeCadastro">Nome:</label>
                    <input id="txtNomeCadastro" name="txtNomeCadastroHTML" type="text" placeholder="Digite seu nome...">
                    <label for="txtCodigoCadastro">Código da Empresa:</label>
                    <input id="txtCodigoCadastro" name="txtCodigoCadastroHTML" type="text" placeholder="xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx">
                </div>
                <div style="flex: 5;">
                    <label for="txtEmailCadastro">Email:</label>
                    <input id="txtEmailCadastro" name="txtEmailCadastroHTML" type="email" placeholder="Digite seu email...">
                    <label for="txtSenhaCadastro">Senha:</label>
                    <input id="txtSenhaCadastro" name="txtSenhaCadastroHTML" type="password" placeholder="Digite sua senha...">
                    <label for="txtConfirmSenhaCadastro">Confirmar Senha:</label>
                    <input id="txtConfirmSenhaCadastro" name="txtConfirmSenhaCadastroHTML" type="password" placeholder="Digite novamente sua senha...">
                </div>
            </form>
            <div id="btnCadastrar" class="btnForm btnAmareloForm" onclick="cadastrarSupervisor()">
                <span>Cadastrar</span>
            </div>
            <a href="./empresa.html">
                <div class="btnForm btnBrancoForm">
                    <span>Não tem uma empresa cadastrada? Cadastre-a agora!</span>
                </div>
            </a>
        </div>
        <div class="linha linha2"></div>
        <div class="container">
            <img class="img2" src="./img/cadastro.svg" alt="Imagem de cadastro">
        </div>
    </div>
</body>

</html>

<script>
    function cadastrarSupervisor() {
        var formulario = new URLSearchParams(new FormData(formCadastroSupervisor));
        if (!document.getElementById("txtNomeCadastro").value == "" || !document.getElementById("txtEmailCadastro").value == "" ||
            !document.getElementById("txtCodigoCadastro").value == "" || !document.getElementById("txtSenhaCadastro").value == "") {
            if (document.getElementById("txtSenhaCadastro").value == document.getElementById("txtConfirmSenhaCadastro").value) {
                fetch("/funcionarios/cadastrarSupervisor", {
                    method: "POST",
                    body: formulario
                }).then(res => {
                    if (res.ok) {
                        alert("Supervisor cadastrado com sucesso!")
                        window.location.href = "./login.html";
                    } else {
                        alert("Houve um erro!")
                    }
                });
            } else {
                alert("Senhas não correspondem!");
            }
        } else {
            alert("Algum campo está em branco!");
        }
    }
</script>